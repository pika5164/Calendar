as.Date("1990-1-19")
str("1990-1-19")
Search <- function(date) {
i <- 1
aDate <- as.Date(date)
year <- format(aDate, "%Y")
record <- c()
if ( year %in% "2013" ) {
for ( i in 1:length(data_2013$date) ) {
data_character <- data_2013$date[i]
data_character <- as.character(as.Date(data_character, format = "%Y/%m/%d"))
if ( data_character %in% date ) {
record <- c( record, i )
} # if
} # for
} else if ( year %in% "2014" ) {
for ( i in 1:length(data_2014$date) ) {
data_character <- data_2014$date[i]
data_character <- as.character(as.Date(data_character, format = "%Y/%m/%d"))
if ( data_character %in% date ) {
record <- c( record, i )
} # if
} # for
} else if ( year %in% "2015" ) {
for ( i in 1:length(data_2015$date) ) {
data_character <- data_2015$date[i]
data_character <- as.character(as.Date(data_character, format = "%Y/%m/%d"))
if ( data_character %in% date ) {
record <- c( record, i )
} # if
} # for
} else if ( year %in% "2016" ) {
for ( i in 1:length(data_2016$date) ) {
data_character <- data_2016$date[i]
data_character <- as.character(as.Date(data_character, format = "%Y/%m/%d"))
if ( data_character %in% date ) {
record <- c( record, i )
} # if
} # for
} else if ( year %in% "2017" ) {
for ( i in 1:length(data_2017$date) ) {
data_character <- data_2017$date[i]
data_character <- as.character(as.Date(data_character, format = "%Y/%m/%d"))
if ( data_character %in% date ) {
record <- c( record, i )
} # if
} # for
} # else if
return(record)
} # Search
SearchResult <- function(record, year) {
if(is.null(record)) {
cat("該日期為平日，且無任何待辦事項\n")
} else {
i <- 1
if ( year %in% "2013" ) {
posnum <- as.numeric( record[i] )
datestr <- as.character(data_2013$date[posnum] )
namestr <- as.character(data_2013$name[posnum] )
isHolidaystr <- as.character(data_2013$isHoliday[posnum] )
holidayCategorystr <- as.character(data_2013$holidayCategory[posnum] )
cat("\n搜尋的日期:", datestr,
"\n該天節日:", namestr,
"\n是否為假日:", isHolidaystr,
"\n節日類別:", holidayCategorystr)
for ( i in 1:length(record) ) {
posnum <- as.numeric( record[i] )
descriptionstr <- as.character(data_2013$description[posnum] )
num <- as.character(i)
cat("\n該天記事", num, ":", descriptionstr)
} # for
} else if ( year %in% "2014" ) {
posnum <- as.numeric( record[i] )
datestr <- as.character(data_2014$date[posnum] )
namestr <- as.character(data_2014$name[posnum] )
isHolidaystr <- as.character(data_2014$isHoliday[posnum] )
holidayCategorystr <- as.character(data_2014$holidayCategory[posnum] )
cat("\n搜尋的日期:", datestr,
"\n該天節日:", namestr,
"\n是否為假日:", isHolidaystr,
"\n節日類別:", holidayCategorystr)
for ( i in 1:length(record) ) {
posnum <- as.numeric( record[i] )
descriptionstr <- as.character(data_2014$description[posnum] )
num <- as.character(i)
cat("\n該天記事", num, ":", descriptionstr)
} # for
} else if ( year %in% "2015" ) {
posnum <- as.numeric( record[i] )
datestr <- as.character(data_2015$date[posnum] )
namestr <- as.character(data_2015$name[posnum] )
isHolidaystr <- as.character(data_2015$isHoliday[posnum] )
holidayCategorystr <- as.character(data_2015$holidayCategory[posnum] )
cat("\n搜尋的日期:", datestr,
"\n該天節日:", namestr,
"\n是否為假日:", isHolidaystr,
"\n節日類別:", holidayCategorystr)
for ( i in 1:length(record) ) {
posnum <- as.numeric( record[i] )
descriptionstr <- as.character(data_2015$description[posnum] )
num <- as.character(i)
cat("\n該天記事", num, ":", descriptionstr)
} # for
} else if ( year %in% "2016" ) {
posnum <- as.numeric( record[i] )
datestr <- as.character(data_2016$date[posnum] )
namestr <- as.character(data_2016$name[posnum] )
isHolidaystr <- as.character(data_2016$isHoliday[posnum] )
holidayCategorystr <- as.character(data_2016$holidayCategory[posnum] )
cat("\n搜尋的日期:", datestr,
"\n該天節日:", namestr,
"\n是否為假日:", isHolidaystr,
"\n節日類別:", holidayCategorystr)
for ( i in 1:length(record) ) {
posnum <- as.numeric( record[i] )
descriptionstr <- as.character(data_2016$description[posnum] )
num <- as.character(i)
cat("\n該天記事", num, ":", descriptionstr)
} # for
} else if ( year %in% "2017" ) {
posnum <- as.numeric( record[i] )
datestr <- as.character(data_2017$date[posnum] )
namestr <- as.character(data_2017$name[posnum] )
isHolidaystr <- as.character(data_2017$isHoliday[posnum] )
holidayCategorystr <- as.character(data_2017$holidayCategory[posnum] )
cat("\n搜尋的日期:", datestr,
"\n該天節日:", namestr,
"\n是否為假日:", isHolidaystr,
"\n節日類別:", holidayCategorystr)
for ( i in 1:length(record) ) {
posnum <- as.numeric( record[i] )
descriptionstr <- as.character(data_2017$description[posnum] )
num <- as.character(i)
cat("\n該天記事", num, ":", descriptionstr)
} # for
} # else if
}
} # SearchResult
NewTheDay <- function(inputDate, things) {
year = format(inputDate, "%Y")
if( year %in% "2013" ) {
data_2013 <<- rbind(data_2013, data.frame(date = format(inputDate, "%Y/%m/%d"),
name = "", isHoliday = "", holidayCategory = "",
description = things))
} else if(year %in% "2014") {
data_2014 <<- rbind(data_2014, data.frame(date = format(inputDate, "%Y/%m/%d"),
name = "", isHoliday = "", holidayCategory = "",
description = things))
} else if(year %in% "2015") {
data_2015 <<- rbind(data_2015, data.frame(date = format(inputDate, "%Y/%m/%d"),
name = "", isHoliday = "", holidayCategory = "",
description = things))
} else if(year %in% "2016") {
data_2016 <<- rbind(data_2016, data.frame(date = format(inputDate, "%Y/%m/%d"),
name = "", isHoliday = "", holidayCategory = "",
description = things))
} else if(year %in% "2017") {
data_2017 <<- rbind(data_2017, data.frame(date = format(inputDate, "%Y/%m/%d"),
name = "", isHoliday = "", holidayCategory = "",
description = things))
}
ifRemind <- readline("是否需要設定提醒(Y/N)?: ")
if(ifRemind == "Y") {
days <- readline("提前提醒天數: ")
inputDate <- inputDate - as.numeric(days)
year = format(inputDate, "%Y")
Remaind <- paste0(days, "天後 ", things, " 即將發生!")
if( year %in% "2013" ) {
data_2013 <<- rbind(data_2013, data.frame(date = format(inputDate, "%Y/%m/%d"),
name = "", isHoliday = "", holidayCategory = "",
description = Remaind))
} else if(year %in% "2014") {
data_2014 <<- rbind(data_2014, data.frame(date = format(inputDate, "%Y/%m/%d"),
name = "", isHoliday = "", holidayCategory = "",
description = Remaind))
} else if(year %in% "2015") {
data_2015 <<- rbind(data_2015, data.frame(date = format(inputDate, "%Y/%m/%d"),
name = "", isHoliday = "", holidayCategory = "",
description = Remaind))
} else if(year %in% "2016") {
data_2016 <<- rbind(data_2016, data.frame(date = format(inputDate, "%Y/%m/%d"),
name = "", isHoliday = "", holidayCategory = "",
description = Remaind))
} else if(year %in% "2017") {
data_2017 <<- rbind(data_2017, data.frame(date = format(inputDate, "%Y/%m/%d"),
name = "", isHoliday = "", holidayCategory = "",
description = Remaind))
}
}
}
List <- function() {
cat("歡迎使用本行事曆!\n
本行事曆功能如下:\n
1.查詢特定日期內容\n
2.新增內容\n
3.結束\n")
command <- readline("請選擇要使用的功能(1, 2, 3):")
while(command == "1" || command == "2" ) {
if ( command == 1 ) {
date <- readline("輸入欲查詢日期(yyyy-mm-dd):")
record <- Search(date)
aDate <- as.Date(date)
year <- format(aDate, "%Y")
if ( year %in% "2013" ) {
SearchResult(record, year)
} else if ( year %in% "2014" ) {
SearchResult(record, year)
} else if ( year %in% "2015" ) {
SearchResult(record, year)
} else if ( year %in% "2016" ) {
SearchResult(record, year)
} else if ( year %in% "2017" ) {
SearchResult(record, year)
}
} else if ( command == 2 ) {
newDate <- readline("輸入欲新增事件的日期(yyyy-mm-dd):")
newDate <- as.Date(newDate)
newThing <- readline("輸入欲新增的事件:")
NewTheDay(newDate, newThing)
} # else if
command <- readline("請選擇要使用的功能(1, 2, 3):")
} # while
cat("bye~bye~")
} # List
datapath <- readline("輸入資料夾路徑:")
datapath <- gsub(pattern="[\\]", replacement = "/", datapath)
setwd(datapath) # 更改檔案路徑
url <- paste0(datapath,"/", dir(pattern = ".csv")[1])
data_2013 <<- read.csv(url, sep = ",", stringsAsFactors = T, header = T) # data.frame
url <- paste0(datapath,"/", dir(pattern = ".csv")[2])
data_2014 <<- read.csv(url, sep = ",", stringsAsFactors = T, header = T) # data.frame
url <- paste0(datapath,"/", dir(pattern = ".csv")[3])
data_2015 <<- read.csv(url, sep = ",", stringsAsFactors = T, header = T) # data.frame
url <- paste0(datapath,"/", dir(pattern = ".csv")[4])
data_2016 <<- read.csv(url, sep = ",", stringsAsFactors = T, header = T) # data.frame
url <- paste0(datapath,"/", dir(pattern = ".csv")[5])
data_2017 <<- read.csv(url, sep = ",", stringsAsFactors = T, header = T) # data.frame
List()
?indexDate
??indexDate
xts.ts <- xts(rnorm(231),as.Date(13514:13744,origin="1970-01-01"))
if (!require(xts)) {
install.packages("xts")
library(xts)
}
xts.ts <- xts(rnorm(231),as.Date(13514:13744,origin="1970-01-01"))
rnorm(231)
start(xts.ts)
end(xts.ts)
periodicity(xts.ts)
xts.ts <- xts(rnorm(10),as.Date(1:5,origin="1970-01-01"))
xts.ts <- xts(rnorm(5),as.Date(1:5,origin="1970-01-01"))
start(xts.ts)
end(xts.ts)
periodicity(xts.ts)
ndays(data_2013)
ndays(data_2013, data_2013[1]:data_2013[3])
ndays(data_2013, data_2013$date[1]:data_2013$date[3])
timeBasedSeq('1999/2008')
plot(data_2013)
plot(as.xts(data_2013))
> plot(as.xts(data_2013), type='candles')
plot(as.xts(data_2013), type='candles')
plot(as.xts(data_2013$date), type='candles')
plot(as.xts(data_2013$date[1]), type='candles')
plot(as.xts(as.character(data_2013$date[1])), type='candles')
Sys.Date()+4:10
Sys.Date()+4:10
x <- xts(4:10, Sys.Date()+4:10)
x
str(x)
is.xts(x)
select(date, contains("2014"))
if (!require(dplyr)) {
install.packages("dplyr")
library(dplyr)
}
d
select(date, contains("2014"))
y <- select(date, contains("2014"))
View(Search)
View(Search)
